<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Planestit - Gerador de Plano de Ação</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vanilla-masker@1.1.1/dist/vanilla-masker.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap');

    body {
      background: radial-gradient(circle, #ccb666 10%, transparent 11%),radial-gradient(circle at bottom left, #ccb666 5%, transparent 6%),radial-gradient(circle at bottom right, #ccb666 5%, transparent 6%),radial-gradient(circle at top left, #ccb666 5%, transparent 6%),radial-gradient(circle at top right, #ccb666 5%, transparent 6%);
      background-size: 1em 1em;
      background-color: #F0E68C;
      opacity: 0.95
      background-color: #F0E68C;
      background-size: 10px 10px;
      background-color: #ffce5b;
      margin: 0;
      padding: 0;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      flex-direction: column;
      min-height: 110vh;
    }

    .container {
      max-width: 600px;
      margin: 0 auto;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.1);
    }

    .header {
      text-align: center;
      margin-top: 0.50rem;
      animation: tracking-in-expand 0.7s cubic-bezier(0.215, 0.610, 0.355, 1.000) both;
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .header img {
      max-width: 400px;
      height: auto;
      margin: auto;
    }

    .input-field {
      width: 100%;
      padding: 0.3rem;
      margin-top: 30px;
      margin-bottom: 0rem;
      border-radius: 0.5rem;
      box-sizing: border-box;
      transition: border-color 0.3s, box-shadow 0.3s;
      resize: none;
      overflow: hidden;
      position: relative;
      background-color: #FFE4B5;
    }

    .input-field:focus {
      outline: none;
      border-color: #4a5568;
      box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.5);
    }

    .format-buttons {
      display: flex;
      gap: 5px;
    }

    .format-buttons button {
      padding: 1px 6px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background-color: #e0e0e0;
      transition: background-color 0.3s;
      font-weight: bold;
    }

    .format-buttons button:hover {
      background-color: #d1d1d1;
    }

    .button {
      background-color: #FFA07A;
      border-radius: 14px;
      display: inline-block;
      cursor: pointer;
      color: #ffffff;
      font-family: Arial;
      font-size: 16px;
      font-weight: bold;
      padding: 2px 17px;
      text-decoration: none;
      transition: background-color 0.3s;
      margin-bottom: 1rem;
    }

    .button:hover {
      background-color: #D2691E;
    }

    .button:active {
      position: relative;
      top: 1px;
    }

    .action-card-container {
      width: 100%;
      margin-top: 2rem;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    .action-card {
      background-color: #fff8dc;
      padding: 20px;
      border-radius: 5px;
      margin: 10px;
      max-width: 300px;
      flex-grow: 1;
      animation: customAni 0.5s ease;
    }

    .action-card button {
      margin-top: 10px;
      display: block;
      width: 100%;
      padding: 0.5rem 0;
      border: none;
      border-radius: 0.5rem;
      background-color: #1D2A1E;
      color: white;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .action-card button:hover {
      background-color: #26622B;
    }

    .highlight {
      font-weight: bold;
      font-size: 2rem;
      color: #2d3748;
    }

    .fadeOut {
      animation: fadeOutAnimation 0.3s ease forwards;
    }

    .btn-container {
      display: flex;
      gap: 1px;
      flex-direction: column;
      align-content: stretch;
      justify-content: center;
    }

    .btn-download,
    .btn-delete {
      border: none;
      border-radius: 15px;
      cursor: pointer;
      transition: background-color 0.3s;
      width: 35px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 0.2rem;
      animation: customAni 0.5s ease;
    }

    .btn-download {
      background-color: #fff;
      color: #ffffff;
    }

    .btn-delete {
      background-color: #fff;
      color: #ffffff;
    }

    @keyframes customAni {
      0% {
        transform: scale(0.5);
        transform-origin: 50% 0%;
      }

      100% {
        transform: scale(1);
        transform-origin: 50% 0%;
      }
    }

    @keyframes fadeOutAnimation {
      0% {
        opacity: 1;
        height: auto;
        padding: 20px;
        margin: 10px;
      }

      100% {
        opacity: 0;
        height: 0;
        padding: 0;
        margin: 0;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="header">
      <img src="logo 01.png" alt="Logo da sua empresa">
    </div>
    <textarea id="what" class="input-field" placeholder="O que será feito?" oninput="autoResize(this)"></textarea>
    <a href="#" class="button" onclick="defineResponsible()">Definir Responsável</a>

    <div id="responsibleSection" style="display: none;">
      <textarea id="who" class="input-field" placeholder="Por quem será feito?" oninput="autoResize(this)"></textarea>
      <a href="#" class="button" onclick="continueToDetails()">Continuar</a>

      <div id="actionDetails" style="display: none;">
        <input type="date" id="when" class="input-field" placeholder="Quando será feito?" required>
        <textarea id="where" class="input-field" placeholder="Onde será feito?" oninput="autoResize(this)"></textarea>
        <textarea id="how" class="input-field" placeholder="Como será feito?" oninput="autoResize(this)"></textarea>
		<div class="format-buttons">
        <button id="boldBtn"><b>B</b></button>
        <button id="italicBtn"><i>I</i></button>
        <button id="bulletListBtn">&#8226;</button>
        <button id="numberedListBtn">1.</button>
      </div>
        <textarea id="why" class="input-field" placeholder="Por que será feito?" oninput="autoResize(this)"></textarea>
		<div class="format-buttons">
        <button id="boldBtn2"><b>B</b></button>
        <button id="italicBtn2"><i>I</i></button>
        <button id="bulletListBtn2">&#8226;</button>
        <button id="numberedListBtn2">1.</button>
      </div>
        <input type="text" id="cost" class="input-field" placeholder="Quanto vai custar?" required>
      </div>
    </div>

    <div class="flex justify-center mt-4">
      <a href="#" class="button" onclick="finishActionPlan()">Finalizar Plano de Ação</a>
    </div>
  </div>

  <div class="action-card-container" id="actionCardContainer"></div>

  <script>
    function defineResponsible() {
      document.getElementById('responsibleSection').style.display = 'block';
    }

    function continueToDetails() {
      document.getElementById('actionDetails').style.display = 'block';
    }

    function finishActionPlan() {
      var what = document.getElementById('what').value;
      var who = document.getElementById('who').value;
      var when = document.getElementById('when').value;
      var where = document.getElementById('where').value;
      var how = document.getElementById('how').value;
      var why = document.getElementById('why').value;
      var costValue = parseFloat(document.getElementById('cost').value.replace(/[^\d.-]/g, '')); // Extrair apenas os números do valor
      var cost = formatCurrency(costValue); // Formatar o valor como moeda
      // Verifica se o campo de custo está vazio
      if (isNaN(costValue) || costValue === 0) {
        cost = 'Sem custos';
      }
      var cardContent = `
        <div class="action-card" style="animation: customAni 0.5s ease;">
            <div class="highlight">${what}</div>
            <div><strong>Responsável:</strong> ${who}</div>
            <div><strong>Quando?</strong> ${when}</div>
            <div><strong>Onde?</strong> ${where}</div>
            <div><strong>Como será feito?</strong> ${how}</div>
            <div><strong>Por que será feito?</strong> ${why}</div>
            <div><strong>Quanto irá custar?</strong> ${cost}</div>
        </div>
      `;
      // Cria um novo elemento div para o card de ação
      var newCard = document.createElement('div');
      newCard.classList.add('action-card'); // Adiciona a classe 'action-card' ao novo card
      newCard.innerHTML = cardContent; // Define o conteúdo do novo card
      // Adiciona o novo card à div de container de cards
      var actionCardContainer = document.getElementById('actionCardContainer');
      actionCardContainer.appendChild(newCard);
      // Aplica a animação ao novo card apenas
      newCard.style.animation = 'customAni 0.5s ease';
      // Cria os botões "Baixar" e "Excluir" para o novo card
      var buttonContainer = document.createElement('div');
      buttonContainer.classList.add('btn-container');
      var downloadButton = document.createElement('button');
var downloadImage = document.createElement('img');
downloadImage.src = 'download.png'; // Substitua 'caminho/para/download.png' pelo caminho correto
downloadImage.alt = 'Baixar';
downloadButton.appendChild(downloadImage);
downloadButton.classList.add('btn-download');
downloadButton.onclick = function() {
  downloadActionPlan(newCard);
};
      var deleteButton = document.createElement('button');
var deleteImage = document.createElement('img');
deleteImage.src = 'excluir.png'; // Substitua 'caminho/para/excluir.png' pelo caminho correto
deleteImage.alt = 'Excluir';
deleteButton.appendChild(deleteImage);
deleteButton.classList.add('btn-delete');
deleteButton.onclick = function() {
  deleteActionPlan(newCard, buttonContainer);
};
      // Adiciona os botões ao final do card
      buttonContainer.appendChild(downloadButton);
      buttonContainer.appendChild(deleteButton);
      actionCardContainer.appendChild(buttonContainer);
      resetForm(); // Limpa o formulário
    }

    function resetForm() {
      document.getElementById('what').value = '';
      document.getElementById('who').value = '';
      document.getElementById('when').value = '';
      document.getElementById('where').value = '';
      document.getElementById('how').value = '';
      document.getElementById('why').value = '';
      document.getElementById('cost').value = '';
      document.getElementById('responsibleSection').style.display = 'none';
      document.getElementById('actionDetails').style.display = 'none';
    }

    function deleteActionPlan(cardElement, buttonContainer) {
      cardElement.classList.add('fadeOut'); // Adiciona a classe para animação de fadeOut
      setTimeout(function() {
        cardElement.remove(); // Remove o card do DOM
        buttonContainer.remove(); // Remove os botões do DOM
      }, 300); // Tempo de espera igual à duração da animação (300ms)
    }
    // Função para formatar um número como moeda (R$)
    function formatCurrency(value) {
      return 'R$ ' + value.toFixed(2).replace(/\d(?=(\d{3})+\.)/g, '$&,'); // Adiciona separadores de milhares e formata duas casas decimais
    }
    // Função para redimensionar automaticamente a área de texto à medida que o usuário digita
    function autoResize(textarea) {
      textarea.style.height = 'auto'; // Redefine a altura para auto para que o navegador calcule a altura correta
      textarea.style.height = textarea.scrollHeight + 'px'; // Define a altura com base no conteúdo
    }
    // Função para gerar a imagem do card
    function downloadActionPlan(cardElement) {
      var cardContent = cardElement.innerHTML; // Conteúdo HTML do card
      var whatValue = ''; // Valor inicial do campo "O QUE SERÁ FEITO"
      // Extrair o valor do campo "O QUE SERÁ FEITO" do conteúdo HTML do card
      var match = cardContent.match(/<div class="highlight">([^<]+)<\/div>/);
      if (match && match.length > 1) {
        whatValue = match[1].trim(); // Valor do campo "O QUE SERÁ FEITO"
      }
      var filename = whatValue !== '' ? whatValue + '.jpg' : 'action-card.jpg'; // Nome do arquivo será o valor do campo "O QUE SERÁ FEITO" seguido de .jpg
      html2canvas(cardElement).then(canvas => {
        var link = document.createElement('a');
        link.href = canvas.toDataURL('image/jpeg', 0.9); // Formato JPG com qualidade de 90%
        link.download = filename;
        link.click();
      });
    }
  </script>
</body>

</html>






